<div *ngIf="is_data_loaded">

  <div class="header">
    <img src="{{session.workshop.links.image}}"/>
    <h1>Teacher Dashboard:</h1>
    <h2>Date: <b>{{session.date_time | date: 'fullDate'}}</b></h2>
    <h2>Time: <b>{{session.date_time | date: 'shortTime'}}</b></h2>
    <p>{{session.workshop.description}}</p>
  </div>

  <mat-tab-group [selectedIndex]="selected_tab">

    <mat-tab label="Attendee List">
      <p>There are currently {{session.total_attendees}} participants signed up for this session. </p>
      <p> The maximum number of attendees is set to {{session.max_attendees}}.</p>
      <ul class="list">
        <li *ngFor="let a of session.attendees">
          <img class="avatar" src="{{a.links.image}}" alt=""/>
          <div class="list-text">
            <p>
              <b>{{ a.display_name }}</b><br/>
              Signed up on {{ a.created | date: 'fullDate'}}<br/>
            </p>
          </div>
        </li>
      </ul>
    </mat-tab>

    <mat-tab label="Email Attendees">
      <form [formGroup]="email_form" novalidate (ngSubmit)="onSendEmail()" class="email_form"  [hidden]="is_sending">
        <div>
          <mat-form-field class="example-full-width">
            <input mdInput formControlName="email_title" placeholder="Email Title" value="" class="form-control">
            <mat-error>
              Title is <strong>required</strong>
            </mat-error>
          </mat-form-field>
        </div>
        <div>
          <mat-form-field class="example-full-width">
    <textarea mdInput formControlName="email_content" placeholder="Description" value="" class="form-control">
    </textarea>
            <mat-error>
              This description is too short.
            </mat-error>
          </mat-form-field>
        </div>
        <button type="submit" mat-button>Send Email to Attendees</button>
      </form>
      <div id="sending-email" [hidden]="!is_sending">
        <mat-progress-spinner class="example-margin"  color="secondary" mode="indeterminate">
        </mat-progress-spinner>
        Sending your email ...
      </div>

    </mat-tab>

    <mat-tab label="Previous Emails">
      <p>The following messages were sent to attendees:</p>
      <ul class="list">
        <li *ngFor="let m of messages">
          <img class="avatar" src="{{session.getInstructor(m.author_id).links.image}}" alt=""/>
          <div class="list_subject">
            <b>Subject:</b> {{m.subject}}<br/>
            <b>Date:</b> {{m.sent_date | date: 'fullDate'}}
          </div>
          <div class="list-content">
            {{m.content}}
          </div>
        </li>
      </ul>
    </mat-tab>

  </mat-tab-group>

</div>



