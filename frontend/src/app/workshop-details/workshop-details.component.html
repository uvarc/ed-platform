<div *ngIf="isDataLoaded">

  <section class="header">
    <div class="circleborder">
      <img class="instructor-big" src="{{workshop.instructor.image()}}">
    </div>
    <h2 class="mat-title">{{workshop.title}}</h2>
    <span class="sub-title">with {{workshop.instructor.display_name}}</span>
  </section>

  <section class="header">
    <p>{{workshop.description}}</p>
  </section>

  <section class="header flex">
    <div>
      {{workshop.nextSession().date_time | date: 'EEE. MMMM d, y, h:mm-'}}{{workshop.nextSession().endTime() | date: 'h:mma'}}
      <br/>
      <span class="sub-title">Location: {{workshop.nextSession().location}}</span>
      <br/>
      <span class="sub-title">Attendees: {{workshop.nextSession().total_participants}} of {{workshop.nextSession().max_attendees}}, with {{workshop.nextSession().waiting_participants}} waiting.</span>

    </div>
    <span class="spacer"></span>
    <button *ngIf="registerState() === 'instructing'" mat-raised-button (click)="goTeacher()">Teacher Dashboard</button>
    <div class="notification" *ngIf="registerState() === 'wait_listed'">You are on the waiting list.  We will notify you when a slot opens or a new session is scheduled.</div>
    <button *ngIf="registerState() === 'awaiting'" mat-raised-button color="accent" (click)="goLogin()">Record Attendance</button>
    <button *ngIf="registerState() === 'registered'" mat-raised-button color="accent" (click)="unRegister()">Cancel Registration</button>
    <button *ngIf="registerState() === 'available'" mat-raised-button (click)="register()">Register</button>
    <button *ngIf="registerState() === 'login'" mat-raised-button (click)="goLogin()">Log In To Register</button>
    <button *ngIf="registerState() === 'full'" mat-raised-button  color="accent"  (click)="register()">Join Wait List</button>

  </section>

  <mat-tab-group class="tall-labels">
    <mat-tab>
      <ng-template mat-tab-label>
          <div>
            <h1>{{tracks.length}}</h1>
            <div class="sub-title">Tracks contain this workshop</div>
          </div>
      </ng-template>
      <div
        class="container"
        fxLayout="row"
        fxLayoutWrap
        fxLayout.xs="column"
        fxLayoutAlign="center"
        fxLayoutGap="10px"
        fxLayoutGap.xs="0">
        <app-track *ngFor="let track of tracks" [track]="track"></app-track>
      </div>
    </mat-tab>
    <mat-tab *ngIf="similarWorkshops().length > 0">
      <ng-template mat-tab-label>
        <div>
          <h1>{{similarWorkshops().length}}</h1>
          <div class="sub-title">Similar Workshops offered</div>
        </div>
      </ng-template>
      <div
        class="container"
        fxLayout="row"
        fxLayoutWrap
        fxLayout.xs="column"
        fxLayoutAlign="center"
        fxLayoutGap="10px"
        fxLayoutGap.xs="0">
        <app-workshop *ngFor="let workshop of similarWorkshops()" [workshop]="workshop"></app-workshop>
      </div>
    </mat-tab>
  </mat-tab-group>





</div>
